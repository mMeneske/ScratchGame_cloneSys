<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Making your first Scratch Phaser 3 Game</title>
    <script src="lib/phaser.min.js"></script>
    <script src="lib/scratch_game.js"></script>
    <script src="lib/cloneSys.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>

    <script type="text/javascript">
        let game = new ScratchGame(800, 600);
        game.preload = preload;
        game.create = create;
        game.update = update;

        let cloneTest;

        function preload() {
            this.loadImage('sky', 'assets/sky.png');
            this.loadImage('sea', 'assets/sea.jpg');
            this.loadImage('space', 'assets/space.jpg');

            this.loadImage('ground', 'assets/platform.png');
            this.loadImage('star', 'assets/star.png');
            this.loadImage('bomb', 'assets/bomb.png');
            this.loadSpritesheet('dude', 'assets/dude.png', 32, 48);
        }

        let cursors;

        function create() {
            cloneTest = initClones(100,100,'dude');
            game.changeBackground('sky');
        }

        function update() {

            if(game.isKeyDown('LEFT')){
                cloneTest.targetAll(moveL());
            }

            if(game.isKeyDown('RIGHT')){
                cloneTest.targetAll(moveR());
            }

            if(game.isKeyDown('SPACE')){
                cloneTest.createClone(1,0);
                console.log(cloneTest.clone,cloneTest.clone[0].key);
            }
        }

        function moveR(){
            ++cloneTest.clone[i].x;
        }

        function moveL(){
            --cloneTest.clone[i].x;
        }



    </script>

</body>

</html>