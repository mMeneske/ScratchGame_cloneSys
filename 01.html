<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Making your first Scratch Phaser 3 Game</title>
    <script src="lib/phaser.min.js"></script>
    <script src="lib/scratch_game.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>

    <script type="text/javascript">
        let game = new ScratchGame(800, 600);
        game.preload = preload;
        game.create = create;
        game.update = update;

        let player;
        let text1;
        let text2;

        function preload() {
            this.loadImage('sea', 'assets/sea.jpg');
            this.loadSpritesheet('dude', 'assets/dude.png', 32, 48);
        }

        function create() {
            this.changeBackground("sea");
            player = this.createSprite(400, 300, "dude");
            player.costume = 4;

            text1 = this.createText(480, 20, "Demo Game #01\nArrow keys to move\nQ/E to rotate\nZ/C to change costume\n+/- to change size");
            text1.font = 'Arial';
            text1.size = 24;
            text1.color = '#00FFFF';

            text2 = this.createText(10, 550, "");
            text2.color = '#FFFFFF';
        }

        function update() {
            if (game.isKeyDown('UP') || game.isKeyDown('W')) {
                player.y -= 2;
            }
            if (game.isKeyDown('DOWN') || game.isKeyDown('S')) {
                player.y += 2;
            }
            if (game.isKeyDown('LEFT') || game.isKeyDown('A')) {
                player.x -= 2;
            }
            if (game.isKeyDown('RIGHT') || game.isKeyDown('D')) {
                player.x += 2;
            }
            if (game.isKeyDown('PLUS') || game.isKeyDown('NUMPAD_ADD')) {
                player.size += 0.1;
            }
            if (game.isKeyDown('MINUS') || game.isKeyDown('NUMPAD_SUBTRACT')) {
                player.size -= 0.1;
            }
            if (game.isKeyDown('Q')) {
                player.turn(-5);
            }
            if (game.isKeyDown('E')) {
                player.turn(5);
            }
            if (game.isKeyDown('Z')) {
                player.changeCostumeBy(-1);
            }
            if (game.isKeyDown('C')) {
                player.changeCostumeBy(1);
            }

            text2.text = "X: " + player.x + "\nY: " + player.y + "\nSize: " + player.size;
        }
    </script>
</body>